<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Google Tag Manager (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-482MR7LT23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-482MR7LT23');
    </script>
    <!-- End Google Tag Manager -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كمشكاة | Kameshkah</title>
    
    <link rel="icon" href="logo.png" type="image/png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden-section { display: none !important; }
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1); }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .filter-btn { transition: all 0.3s ease; }
        .filter-btn.active {
            background-color: #059669; 
            color: white;
            border-color: #059669;
            box-shadow: 0 4px 6px -1px rgba(5, 150, 105, 0.3);
        }
        
        .filters-container {
            -ms-overflow-style: none;
            scrollbar-width: none;
            padding-bottom: 10px;
        }
        .filters-container::-webkit-scrollbar { display: none; }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-top: 1px solid rgba(255, 255, 255, 0.7);
            border-left: 1px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .solid-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        #lightbox {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background-color: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: all 0.3s ease;
        }
        #lightbox.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        #lightbox img {
            max-height: 90vh;
            max-width: 90vw;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        @keyframes heart-pump {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        .heart-active {
            color: #ef4444 !important;
            fill: #ef4444 !important;
            animation: heart-pump 0.3s ease-in-out;
        }
    </style>
</head>
<body class="text-slate-800 min-h-screen relative">

    <div class="fixed inset-0 z-[-1]">
        <img src="bg.jpg" alt="Background" class="w-full h-full object-cover" onerror="this.style.display='none'; document.body.classList.add('bg-slate-50')">
        <div class="absolute inset-0 bg-slate-900/20"></div>
    </div>

    <!-- Lightbox -->
    <div id="lightbox" onclick="closeLightbox()">
        <button class="absolute top-5 right-5 text-white/80 hover:text-white transition p-2 bg-white/10 rounded-full z-50" onclick="closeLightbox()">
            <i data-lucide="x" class="w-8 h-8"></i>
        </button>
        <img id="lightbox-img" src="" alt="Full View" onclick="event.stopPropagation()">
        <a id="lightbox-download" href="#" download class="absolute bottom-10 bg-emerald-600 text-white px-8 py-3 rounded-full font-bold flex items-center gap-3 hover:bg-emerald-700 transition shadow-2xl border border-white/20 z-50" onclick="event.stopPropagation()">
            <i data-lucide="download" class="w-5 h-5"></i> تحميل بجودة عالية
        </a>
    </div>

    <nav class="fixed top-0 w-full glass-panel z-50 text-white !bg-emerald-900/80 !border-b-emerald-800/30 !rounded-none !border-x-0 !border-t-0">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-20">
                <div onclick="showPage('home')" class="flex items-center gap-3 cursor-pointer group select-none">
                    <img src="logo.png" alt="شعار كمشكاة" class="w-12 h-12 object-contain transform group-hover:rotate-6 transition-transform drop-shadow-md bg-white/90 rounded-lg p-1">
                    <span class="text-2xl font-bold tracking-wide">كمشكاة</span>
                </div>

                <div class="hidden md:flex items-center gap-2 bg-emerald-800/40 backdrop-blur p-1.5 rounded-full border border-emerald-500/30">
                    <button onclick="showPage('home')" class="nav-btn px-4 py-2 rounded-full text-sm font-bold transition-all" data-page="home">الرئيسية</button>
                    <button onclick="showPage('courses')" class="nav-btn px-4 py-2 rounded-full text-sm font-bold transition-all" data-page="courses">كورسات</button>
                    <button onclick="showPage('gallery')" class="nav-btn px-4 py-2 rounded-full text-sm font-bold transition-all" data-page="gallery">تصميم كمشكاة</button>
                    <button onclick="showPage('articles')" class="nav-btn px-4 py-2 rounded-full text-sm font-bold transition-all" data-page="articles">مقالات</button>
                    <button onclick="showPage('library')" class="nav-btn px-4 py-2 rounded-full text-sm font-bold transition-all" data-page="library">مكتبة</button>
                    <button onclick="showPage('contact')" class="nav-btn px-4 py-2 rounded-full text-sm font-bold transition-all" data-page="contact">تواصل</button>
                </div>

                <button class="md:hidden p-2 hover:bg-emerald-800 rounded-lg transition" onclick="toggleMobileMenu()">
                    <i data-lucide="menu" class="w-7 h-7"></i>
                </button>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden glass-panel !bg-emerald-900/95 !rounded-none border-t border-emerald-800 p-4 space-y-2 shadow-xl absolute w-full z-40">
            <button onclick="showPage('home')" class="block w-full text-right px-4 py-3 rounded-lg hover:bg-emerald-800 transition text-emerald-50 font-bold">الرئيسية</button>
            <button onclick="showPage('courses')" class="block w-full text-right px-4 py-3 rounded-lg hover:bg-emerald-800 transition text-emerald-50 font-bold">كورسات تعليمية</button>
            <button onclick="showPage('gallery')" class="block w-full text-right px-4 py-3 rounded-lg hover:bg-emerald-800 transition text-emerald-50 font-bold">تصميم كمشكاة</button>
            <button onclick="showPage('articles')" class="block w-full text-right px-4 py-3 rounded-lg hover:bg-emerald-800 transition text-emerald-50 font-bold">مقالات</button>
            <button onclick="showPage('library')" class="block w-full text-right px-4 py-3 rounded-lg hover:bg-emerald-800 transition text-emerald-50 font-bold">مكتبة الكتب</button>
            <button onclick="showPage('contact')" class="block w-full text-right px-4 py-3 rounded-lg hover:bg-emerald-800 transition text-emerald-50 font-bold">تواصل معنا</button>
        </div>
    </nav>

    <main class="pt-28 pb-12 px-4 container mx-auto max-w-7xl min-h-screen">

        <!-- 1. الرئيسية -->
        <div id="home" class="page-section fade-in">
            <div class="glass-panel rounded-3xl p-8 md:p-20 text-center relative overflow-hidden mb-8">
                <div class="absolute top-0 right-0 w-64 h-64 bg-emerald-300/30 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-teal-300/30 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"></div>
                
                <div class="relative z-10">
                    <h1 class="text-4xl md:text-7xl font-black text-emerald-800 mb-6 leading-tight drop-shadow-sm tracking-tight">
                        كمشكاة
                    </h1>
                    <p class="text-xl md:text-2xl text-slate-700 max-w-3xl mx-auto mb-10 leading-relaxed font-bold drop-shadow-sm">
                        استعن بالله ولا تعجز
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button onclick="showPage('courses')" class="bg-emerald-700 text-white px-10 py-4 rounded-2xl font-bold text-lg hover:bg-emerald-800 hover:-translate-y-1 transition shadow-lg shadow-emerald-900/20">شوف الكورسات</button>
                        <button onclick="showPage('gallery')" class="glass-panel text-emerald-900 px-10 py-4 rounded-2xl font-bold text-lg hover:bg-white/80 hover:-translate-y-1 transition shadow-sm border-emerald-100">تصفح المعرض</button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-panel p-8 rounded-3xl text-center transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl font-black text-emerald-700 mb-2 counter" data-target="846">0</div>
                    <div class="text-slate-600 font-bold text-lg">زائر للموقع</div>
                </div>
                <div class="glass-panel p-8 rounded-3xl text-center transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl font-black text-emerald-700 mb-2 counter" data-target="300">0</div>
                    <div class="text-slate-600 font-bold text-lg">كورس تعليمي</div>
                </div>
                <div class="glass-panel p-8 rounded-3xl text-center transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl font-black text-emerald-700 mb-2 counter" data-target="5">0</div>
                    <div class="text-slate-600 font-bold text-lg">مقال حصري</div>
                </div>
            </div>
        </div>

        <!-- 2. الكورسات -->
        <div id="courses" class="page-section hidden-section fade-in">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
                <div class="flex items-center gap-4 glass-panel px-6 py-3 rounded-2xl">
                    <div class="w-2 h-10 bg-emerald-500 rounded-full"></div>
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-800">الكورسات التعليمية</h2>
                </div>
                
                <div class="relative w-full md:w-96">
                    <input type="text" id="course-search-input" onkeyup="filterCourses()" placeholder="ابحث عن كورس (تصميم، برمجة...)" 
                           class="w-full pl-4 pr-12 py-3 rounded-xl border border-white/50 bg-white/70 backdrop-blur focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all shadow-sm placeholder-slate-500 text-slate-800">
                    <i data-lucide="search" class="absolute right-4 top-3.5 text-slate-500 w-5 h-5"></i>
                </div>
            </div>

            <div id="course-category-filters" class="filters-container flex overflow-x-auto pb-4 gap-3 mb-4 whitespace-nowrap">
                <button onclick="filterCoursesByCategory('الكل')" class="filter-btn active px-6 py-2 rounded-full border border-white/50 bg-white/70 backdrop-blur text-slate-700 font-bold hover:bg-white transition-colors flex-shrink-0 shadow-sm">الكل</button>
            </div>
            
            <div id="courses-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 min-h-[300px]"></div>
        </div>

        <!-- 3. معرض الصور -->
        <div id="gallery" class="page-section hidden-section fade-in">
            <div class="text-center mb-12">
                <div class="inline-block glass-panel px-10 py-5 rounded-full shadow-lg">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-1">تصميم كمشكاة</h2>
                    <p class="text-slate-600 font-medium">مكتبة إبداعية (اضغط على الصورة للتكبير)</p>
                </div>
            </div>
            
            <div id="gallery-grid" class="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6"></div>

            <div class="text-center mt-12">
                <button id="load-more-btn" onclick="loadMoreImages()" class="group glass-panel !bg-slate-800/90 text-white px-10 py-4 rounded-xl font-bold hover:!bg-slate-700 transition shadow-xl flex items-center justify-center gap-3 mx-auto disabled:opacity-50 disabled:cursor-not-allowed border-none">
                    <span>تحميل المزيد</span>
                    <i data-lucide="arrow-down" class="w-5 h-5 group-hover:translate-y-1 transition-transform"></i>
                </button>
                <p id="gallery-status" class="mt-4 text-white text-sm font-bold shadow-sm drop-shadow-md"></p>
            </div>
        </div>

        <!-- 4. المقالات -->
        <div id="articles" class="page-section hidden-section fade-in">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
                <!-- هيدر المقالات بدون زجاج (أبيض) -->
                <div class="flex items-center gap-4 bg-white px-6 py-3 rounded-2xl shadow-md border border-slate-200">
                    <div class="w-2 h-10 bg-emerald-500 rounded-full"></div>
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-800">أحدث المقالات</h2>
                </div>
                
                <div class="relative w-full md:w-96">
                    <input type="text" id="article-search-input" onkeyup="filterArticles()" placeholder="ابحث في المقالات..." 
                           class="w-full pl-4 pr-12 py-3 rounded-xl border border-slate-200 bg-white focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all shadow-sm text-slate-800">
                    <i data-lucide="search" class="absolute right-4 top-3.5 text-slate-400 w-5 h-5"></i>
                </div>
            </div>

            <div id="article-category-filters" class="filters-container flex overflow-x-auto pb-4 gap-3 mb-4 whitespace-nowrap">
                <button onclick="filterArticlesByCategory('الكل')" class="filter-btn active px-6 py-2 rounded-full border border-slate-200 bg-white text-slate-700 font-bold hover:bg-slate-50 transition-colors flex-shrink-0 shadow-sm">الكل</button>
            </div>

            <div id="articles-grid" class="space-y-6"></div>
        </div>

        <!-- 4.1. صفحة عرض المقال الواحد -->
        <div id="article-view" class="page-section hidden-section fade-in">
            <div class="max-w-4xl mx-auto">
                <button onclick="showPage('articles')" class="mb-6 flex items-center gap-2 text-white bg-slate-800/50 backdrop-blur px-4 py-2 rounded-xl hover:bg-emerald-600 transition font-bold shadow-md hover:shadow-lg border border-white/20">
                    <i data-lucide="arrow-right" class="w-5 h-5"></i> رجوع للمقالات
                </button>
                
                <div class="bg-white rounded-3xl overflow-hidden shadow-2xl border border-slate-200">
                    <div class="h-64 md:h-96 w-full relative">
                        <img id="article-view-image" src="" alt="Article Cover" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/90 to-transparent flex items-end">
                            <div class="p-8 md:p-12 w-full">
                                <div class="flex items-center gap-3 mb-3">
                                    <span id="article-view-category" class="bg-emerald-500 text-white px-3 py-1 rounded-full text-sm font-bold inline-block shadow-lg"></span>
                                    <span id="article-view-date" class="bg-white/20 backdrop-blur text-white px-3 py-1 rounded-full text-sm font-bold inline-block border border-white/30"></span>
                                </div>
                                <h1 id="article-view-title" class="text-3xl md:text-5xl font-bold text-white leading-tight drop-shadow-md"></h1>
                                <p class="text-emerald-100 text-sm mt-2 font-bold flex items-center gap-2"><i data-lucide="user" class="w-4 h-4"></i> بقلم: مصطفى كمشكاة</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-8 md:p-12">
                        <div id="article-view-content" class="article-content text-slate-800 leading-loose text-lg"></div>
                        
                        <div class="mt-12 pt-8 border-t border-slate-200 flex justify-between items-center">
                            <span class="text-slate-500 font-bold">هل أعجبك المقال؟</span>
                            <div class="flex gap-2">
                                <button id="article-share-btn" class="p-3 bg-slate-100 rounded-full hover:bg-emerald-100 hover:text-emerald-600 transition" title="مشاركة المقال">
                                    <i data-lucide="share-2" class="w-5 h-5"></i>
                                </button>
                                <button id="article-heart-btn" class="p-3 bg-slate-100 rounded-full hover:bg-red-100 hover:text-red-600 transition" title="أحببته">
                                    <i data-lucide="heart" class="w-5 h-5"></i> <span class="text-sm font-bold ml-1"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. المكتبة (معدلة) -->
        <div id="library" class="page-section hidden-section fade-in">
            <div class="flex flex-col items-center justify-center min-h-[60vh] text-center p-6">
                <div class="glass-panel p-12 rounded-3xl max-w-2xl border border-white/50 shadow-2xl">
                    <div class="bg-blue-100 text-blue-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse">
                        <i data-lucide="library" class="w-12 h-12"></i>
                    </div>
                    <h2 class="text-4xl font-bold text-slate-800 mb-4">مكتبة كمشكاة</h2>
                    <p class="text-xl text-slate-600 mb-8 font-medium">قريباً.. انتظروا مكتبة قوية تضم أهم الكتب والمصادر</p>
                    <div class="bg-white/50 backdrop-blur p-4 rounded-xl inline-flex items-center gap-2 text-slate-600 font-bold border border-slate-200">
                        <i data-lucide="hammer" class="w-6 h-6 text-blue-600"></i> جاري العمل عليها
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. تواصل معنا -->
        <div id="contact" class="page-section hidden-section fade-in">
            <div class="max-w-5xl mx-auto">
                <div class="glass-panel rounded-3xl overflow-hidden !border-white/60 shadow-2xl">
                    <div class="bg-gradient-to-r from-emerald-800 to-teal-900 h-48 relative">
                        <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                        <div class="absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-white/10 to-transparent"></div>
                    </div>
                    
                    <div class="p-8 md:p-12 text-center -mt-24 relative z-10">
                        <div class="w-40 h-40 bg-white/80 backdrop-blur rounded-full mx-auto p-1.5 shadow-2xl flex items-center justify-center mb-6 relative group border border-white/50">
                            <div class="w-full h-full bg-slate-100 rounded-full flex items-center justify-center text-emerald-800 overflow-hidden relative">
                                <i data-lucide="user" class="w-20 h-20"></i>
                            </div>
                            <div class="absolute bottom-2 right-2 bg-emerald-500 text-white p-2 rounded-full border-4 border-white shadow-sm" title="Verified Creator">
                                <i data-lucide="check" class="w-4 h-4"></i>
                            </div>
                        </div>
                        
                        <h2 class="text-4xl md:text-5xl font-bold text-slate-800 mb-2">مصطفى عبد الناصر</h2>
                        <p class="text-emerald-600 font-bold text-xl mb-4 tracking-wide flex items-center justify-center gap-2">
                            <i data-lucide="pen-tool" class="w-5 h-5"></i>
                            Graphic Designer & Content Creator
                        </p>
                        <p class="text-slate-500 max-w-2xl mx-auto mb-10 text-lg leading-relaxed">
                            مصطفي عبد الناصر "كمشكاة" صانع محتوي كمشكاة ومصمم جرافيك <br> كمشكاة نسأل الله التوفيق
                        </p>

                        <div class="mb-12">
                            <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center justify-center gap-2">
                                <span class="w-8 h-1 bg-emerald-500 rounded-full"></span>
                                تواصل معي (شخصي)
                                <span class="w-8 h-1 bg-emerald-500 rounded-full"></span>
                            </h3>
                            <div class="flex flex-wrap justify-center gap-4">
                                <a href="https://www.facebook.com/MostafaKmshkat" target="_blank" class="p-4 bg-blue-50/80 text-blue-700 rounded-2xl hover:bg-blue-600 hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="Facebook">
                                    <i data-lucide="facebook" class="w-6 h-6"></i>
                                </a>
                                <a href="https://www.instagram.com/mostafakmshkat/" target="_blank" class="p-4 bg-pink-50/80 text-pink-600 rounded-2xl hover:bg-pink-600 hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="Instagram">
                                    <i data-lucide="instagram" class="w-6 h-6"></i>
                                </a>
                                <a href="https://x.com/Mostafakamishka" target="_blank" class="p-4 bg-slate-50/80 text-slate-700 rounded-2xl hover:bg-black hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="X (Twitter)">
                                    <i data-lucide="twitter" class="w-6 h-6"></i>
                                </a>
                                <a href="https://www.linkedin.com/in/mostafakamishka" target="_blank" class="p-4 bg-sky-50/80 text-sky-700 rounded-2xl hover:bg-sky-700 hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="LinkedIn">
                                    <i data-lucide="linkedin" class="w-6 h-6"></i>
                                </a>
                                <a href="https://www.behance.net/mostafaabdelnasser" target="_blank" class="p-4 bg-blue-50/80 text-blue-900 rounded-2xl hover:bg-blue-900 hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="Behance">
                                    <span class="font-bold text-lg leading-none">Be</span>
                                </a>
                                <a href="https://www.tiktok.com/@mostafakamishkaa?is_from_webapp=1&sender_device=pc" target="_blank" class="p-4 bg-slate-50/80 text-black rounded-2xl hover:bg-black hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="TikTok">
                                    <span class="font-bold text-lg leading-none">Tik</span>
                                </a>
                                <a href="https://t.me/Mostafa_Kmshkat" target="_blank" class="p-4 bg-sky-50/80 text-sky-500 rounded-2xl hover:bg-sky-500 hover:text-white transition-all hover:-translate-y-1 shadow-sm group glass-panel" title="Telegram (Personal)">
                                    <i data-lucide="send" class="w-6 h-6"></i>
                                </a>
                            </div>
                        </div>
                        
                        <div class="glass-panel !bg-slate-50/50 rounded-3xl p-8 border border-slate-200/50">
                            <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center justify-center gap-2">
                                <i data-lucide="users" class="text-emerald-600"></i>
                                مجتمع كمشكاة الرسمي
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl mx-auto">
                                <a href="https://t.me/Kmshkat" target="_blank" class="flex items-center gap-4 p-4 bg-white/70 rounded-2xl border border-slate-200 hover:border-sky-400 hover:shadow-md transition-all group text-right glass-panel hover:!bg-white">
                                    <div class="bg-sky-100/80 p-3 rounded-xl text-sky-600 group-hover:bg-sky-500 group-hover:text-white transition-colors">
                                        <i data-lucide="send" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">قناة التيليجرام</h4>
                                        <p class="text-xs text-slate-500">أحدث الأخبار والمحتوى</p>
                                    </div>
                                </a>

                                <a href="https://t.me/Kamshka_Communtiy" target="_blank" class="flex items-center gap-4 p-4 bg-white/70 rounded-2xl border border-slate-200 hover:border-indigo-400 hover:shadow-md transition-all group text-right glass-panel hover:!bg-white">
                                    <div class="bg-indigo-100/80 p-3 rounded-xl text-indigo-600 group-hover:bg-indigo-500 group-hover:text-white transition-colors">
                                        <i data-lucide="messages-square" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">جروب المناقشات</h4>
                                        <p class="text-xs text-slate-500">شاركنا رأيك واستفساراتك</p>
                                    </div>
                                </a>

                                <a href="https://whatsapp.com/channel/0029VaobuNjKgsNwqB3rtv3B" target="_blank" class="flex items-center gap-4 p-4 bg-white/70 rounded-2xl border border-slate-200 hover:border-green-500 hover:shadow-md transition-all group text-right glass-panel hover:!bg-white">
                                    <div class="bg-green-100/80 p-3 rounded-xl text-green-600 group-hover:bg-green-500 group-hover:text-white transition-colors">
                                        <i data-lucide="message-circle" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">قناة الواتساب</h4>
                                        <p class="text-xs text-slate-500">تابعنا على واتساب</p>
                                    </div>
                                </a>

                                <a href="https://www.facebook.com/profile.php?id=61583541613263&locale=ar_AR" target="_blank" class="flex items-center gap-4 p-4 bg-white/70 rounded-2xl border border-slate-200 hover:border-blue-600 hover:shadow-md transition-all group text-right glass-panel hover:!bg-white">
                                    <div class="bg-blue-100/80 p-3 rounded-xl text-blue-700 group-hover:bg-blue-700 group-hover:text-white transition-colors">
                                        <i data-lucide="facebook" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">صفحة الفيسبوك</h4>
                                        <p class="text-xs text-slate-500">تابعنا على فيسبوك</p>
                                    </div>
                                </a>

                                <a href="https://www.instagram.com/kmshka.official/" target="_blank" class="flex items-center gap-4 p-4 bg-white/70 rounded-2xl border border-slate-200 hover:border-pink-500 hover:shadow-md transition-all group text-right glass-panel hover:!bg-white">
                                    <div class="bg-pink-100/80 p-3 rounded-xl text-pink-600 group-hover:bg-pink-500 group-hover:text-white transition-colors">
                                        <i data-lucide="instagram" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">انستجرام كمشكاة</h4>
                                        <p class="text-xs text-slate-500">كواليس وصور حصرية</p>
                                    </div>
                                </a>
                                
                                <a href="https://x.com/KmshkaOfficial" target="_blank" class="flex items-center gap-4 p-4 bg-white/70 rounded-2xl border border-slate-200 hover:border-slate-800 hover:shadow-md transition-all group text-right md:col-span-2 glass-panel hover:!bg-white">
                                    <div class="bg-slate-100/80 p-3 rounded-xl text-slate-700 group-hover:bg-black group-hover:text-white transition-colors">
                                        <i data-lucide="twitter" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">منصة X</h4>
                                        <p class="text-xs text-slate-500">تغريدات سريعة</p>
                                    </div>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-white/80 backdrop-blur border-t border-slate-200 py-10 text-center">
        <p class="text-slate-600 font-medium">جميع الحقوق محفوظة © 2025 <span class="text-emerald-800 font-bold">مصطفى كمشكاة</span></p>
    </footer>

    <script>
        // --- 1. بيانات الكورسات (القائمة الجديدة) ---
        const coursesData = [
            { "id": 1, "title": "Professional Diploma in Public Relations and PR Management", "description": "دبلومة احترافية في العلاقات العامة وإدارة العلاقات العامة.", "image": "images/course1.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/professional-diploma-in-public-relations-and-pr-management/?couponCode=2DD9D83609C344871A6B" },
            { "id": 2, "title": "Executive Diploma of Chief Technology Officer", "description": "الدبلوم التنفيذي للمدير التقني (CTO).", "image": "images/course2.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/executive-diploma-of-chief-technology-officer/?couponCode=D3A0D5EF4D5F37A39CC5" },
            { "id": 3, "title": "Essential Canva for Graphics Design to Boost Productivity", "description": "تعلم أساسيات كانفا لتصميم الجرافيك وزيادة الإنتاجية.", "image": "images/course3.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/essential-canva-for-graphics-design-to-boost-productivity/?couponCode=BB5ED7871E98268A960F" },
            { "id": 4, "title": "Python Mastery: The Complete Web Programming Course", "description": "إتقان بايثون: كورس برمجة الويب الكامل.", "image": "images/course4.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/python-mastery-the-complete-web-programming-course/?couponCode=711651A202929A3D6DC9" },
            { "id": 5, "title": "Advanced Diploma in Technology Management", "description": "دبلوم متقدم في إدارة التكنولوجيا لمديري تكنولوجيا المعلومات.", "image": "images/course5.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/mini-mba-in-technology-management-for-cio-cto/?couponCode=1CA3005E5F002F0FA8AF" },
            { "id": 6, "title": "Social Media Video Editing with Canva, Capcut & Premiere Pro", "description": "تحرير فيديو السوشيال ميديا باستخدام كانفا، كاب كات، وبريمير برو.", "image": "images/course6.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/social-media-video-editing-with-canva-capcut-premiere-pro/?couponCode=2C743E53D0356CFC3DA2" },
            { "id": 7, "title": "The Complete Da Vinci Resolve Course: Beginner to Filmmaker", "description": "كورس دافينشي ريزولف الكامل: من المبتدئ إلى صانع الأفلام.", "image": "images/course7.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/the-complete-da-vinci-resolve-course-beginner-to-filmmaker/?couponCode=BFBB553C77DD504A5C2B" },
            { "id": 8, "title": "Prompt & AI Engineering Safety Professional Certification", "description": "شهادة احترافية في هندسة الأوامر وسلامة الذكاء الاصطناعي.", "image": "images/course8.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/prompt-engineering-safety-ai-engineering-safety-expert/?couponCode=31CD744B6637BE81E236" },
            { "id": 9, "title": "CSO Chief Security Officer Executive Certification", "description": "الشهادة التنفيذية لرئيس أمن المعلومات (CSO).", "image": "images/course9.jpg", "category": "تكنولوجيا وشبكات", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/chief-security-officer/?couponCode=A855C5262AD426250E43" },
            { "id": 10, "title": "Python Fundamentals Bootcamp 2025: Beginner to Pro", "description": "معسكر أساسيات بايثون 2025: من المبتدئ إلى المحترف.", "image": "images/course10.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/python-basics-2023-bootcamp/?couponCode=89D8EDE13D89BC59502E" },
            { "id": 11, "title": "Object Detection From Zero to Hero", "description": "اكتشاف الكائنات من الصفر إلى الاحتراف.", "image": "images/course11.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/object-detection-from-zero-to-hero/?couponCode=C94BA4E130A56A8E74D7" },
            { "id": 12, "title": "Algorithm Alchemy: Unlocking the Secrets of Machine Learning", "description": "خيمياء الخوارزميات: كشف أسرار تعلم الآلة.", "image": "images/course12.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/machine-learning-algorithm/?couponCode=AI_NOV_03" },
            { "id": 13, "title": "Microsoft Excel Basic to Advanced: A Complete Learning Path", "description": "مايكروسوفت إكسل من الأساسيات إلى المتقدم: مسار تعلم كامل.", "image": "images/course13.jpg", "category": "إنتاجية ومكاتب", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/microsoft-excel-basic-to-advanced-a-complete-learning-path/?couponCode=BISMILLAH_15" },
            { "id": 14, "title": "React Crash Course: From Zero to Hero", "description": "كورس مكثف في الرياكت: من الصفر إلى البطل.", "image": "images/course14.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/react-crash-course-from-zero-to-hero/?couponCode=25NOVEMBER2025" },
            { "id": 15, "title": "Microsoft Excel : Mastering Data Analysis with Pivot Table", "description": "إتقان تحليل البيانات باستخدام الجداول المحورية في إكسل.", "image": "images/course15.jpg", "category": "إنتاجية ومكاتب", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/microsoft-excel-mastering-data-analysis-with-pivot-table/?couponCode=915B08AFC8BA2DB90204" },
            { "id": 16, "title": "Adobe After Effects: From Beginner to Motion Master", "description": "أدوبي أفتر إفكتس: من المبتدئ إلى خبير الموشن.", "image": "images/course16.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/adobe-after-effects-from-beginner-to-motion-master/?couponCode=10BA92AED09453F4891E" },
            { "id": 17, "title": "Governmental Accounting 200 Capital Projects & Debt Service", "description": "المحاسبة الحكومية 200: المشاريع الرأسمالية وخدمة الدين.", "image": "images/course17.jpg", "category": "محاسبة ومالية", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/governmental-accounting-200-capital-projects-debt-service/?couponCode=D7D29F1FFEC555A5A364" },
            { "id": 18, "title": "Learn Graphic Design with Photoshop Illustrator and InDesign", "description": "تعلم تصميم الجرافيك باستخدام فوتوشوب، إليستريتور، وإنديزاين.", "image": "images/course18.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/graphic-design-masterclass-adobe-photoshop-illustrator-indesign-canva/?couponCode=1EFD25750968E973F78F" },
            { "id": 19, "title": "Build A Complete Authentication Authorization Web App", "description": "بناء تطبيق ويب كامل للمصادقة والترخيص [2025].", "image": "images/course19.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/authentication-authorization-security-the-complete-guide/?couponCode=AT-FREE-NOV25" },
            { "id": 20, "title": "CSS Crash Course For Beginners", "description": "كورس مكثف في CSS للمبتدئين.", "image": "images/course20.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/css-crash-course-for-beginners-g/?couponCode=F68FA15740BFC182EBAE" },
            { "id": 21, "title": "Perplexity AI for Marketing & Business Automation", "description": "استخدام Perplexity AI للتسويق وأتمتة الأعمال.", "image": "images/course21.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/perplexity-ai-for-marketing-business-automation/?couponCode=27NOVEMBER2025" },
            { "id": 22, "title": "Professional Certificate in Agile and SCRUM", "description": "شهادة احترافية في الأجايل وسكرام.", "image": "images/course22.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/professional-certificate-in-agile-and-scrum/?couponCode=5D982787C9B697C3DA2C" },
            { "id": 23, "title": "PowerPoint Business Presentations with ChatGPT Generative AI", "description": "عروض باوربوينت للأعمال باستخدام ChatGPT والذكاء الاصطناعي التوليدي.", "image": "images/course23.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/powerpoint-business-presentations-with-chatgpt-generative-ai/?couponCode=4F584AB95BEB07954840" },
            { "id": 24, "title": "ChatGPT for Product Management & Innovation", "description": "استخدام ChatGPT لإدارة المنتجات والابتكار.", "image": "images/course24.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/chatgpt-for-product-management-innovation-aec/?couponCode=0A165635F13AA2247D93" },
            { "id": 25, "title": "Professional Diploma in Agile and Scrum", "description": "دبلوم احترافي في الأجايل وسكرام.", "image": "images/course25.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/professional-diploma-in-agile-and-scrum/?couponCode=185528C9374F62C07EF3" },
            { "id": 26, "title": "Presentation Expert: AI & GPT, Pitch Decks, Business Speech", "description": "خبير العروض التقديمية: الذكاء الاصطناعي، العروض الترويجية، وخطابات الأعمال.", "image": "images/course26.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/presentation-expert-ai-gpt-pitch-decks-business-speech/?couponCode=97A17EC41F9D67E88AEE" },
            { "id": 27, "title": "Mastering Power BI: From Data to Dashboard", "description": "إتقان Power BI: من البيانات إلى لوحة القيادة.", "image": "images/course27.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/mastering-power-bi-from-data-to-dashboard/?couponCode=E1E0A71AE2BEA6B1CA49" },
            { "id": 28, "title": "Top 1% Career Secrets: Something They Don’t Teach in School", "description": "أسرار النجاح الوظيفي لأفضل 1%: مهارات لا تدرس في المدارس.", "image": "images/course28.jpg", "category": "تطوير ذات", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/become-a-corporate-winner/?couponCode=NOV2025FREE001" },
            { "id": 29, "title": "Executive Diploma in Business Management and Administration", "description": "دبلوم تنفيذي في إدارة الأعمال والإدارة.", "image": "images/course29.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/executive-diploma-in-business-management-and-administration/?couponCode=C3AC6D445CD3368D662E" },
            { "id": 30, "title": "Certified Chief Technology Officer(CTO) Mastery Program", "description": "برنامج إتقان المدير التقني المعتمد (CTO).", "image": "images/course30.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/chief-technology-officercto-mastery-program/?couponCode=AI_NOV_03" },
            { "id": 31, "title": "Executive Diploma in Leadership and Management", "description": "دبلوم تنفيذي في القيادة والإدارة.", "image": "images/course31.jpg", "category": "إدارة أعمال", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/executive-diploma-in-leadership-and-management/?couponCode=226D25F47550DE5079A8" },
            { "id": 32, "title": "MCP for Leaders: Architecting Context-Driven AI", "description": "MCP للقادة: هندسة الذكاء الاصطناعي المدفوع بالسياق.", "image": "images/course32.jpg", "category": "ذكاء اصطناعي", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/mcp-for-leaders-architecting-context-driven-ai/?couponCode=AI_NOV_03" },
            { "id": 33, "title": "Professional Diploma in Business English and Communications", "description": "دبلوم احترافي في الإنجليزية للأعمال والاتصالات.", "image": "images/course33.jpg", "category": "لغات ومهارات", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/professional-diploma-in-business-english-and-communications/?couponCode=C85E9532336D20D4CEDC" },
            { "id": 34, "title": "Numpy For Data Science - Real Time Coding Exercises", "description": "Numpy لعلم البيانات: تمارين برمجة في الوقت الحقيقي.", "image": "images/course34.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/python-numpy-exercises/?couponCode=NUMPY_FREE_NOV28" },
            { "id": 35, "title": "Professional Diploma in Social Media Marketing & Copywriting", "description": "دبلوم احترافي في التسويق عبر وسائل التواصل الاجتماعي وكتابة المحتوى.", "image": "images/course35.jpg", "category": "تسويق", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/professional-diploma-in-social-media-marketing-copywriting/?couponCode=2C44CF9853B582682E58" },
            { "id": 36, "title": "Understanding TypeScript For Beginner To Advanced", "description": "فهم TypeScript من المبتدئ إلى المتقدم.", "image": "images/course36.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/understanding-typescript-for-beginner-to-advanced/?couponCode=00FEDB74B00FC5E58E74" },
            { "id": 37, "title": "Microsoft Excel Pivot Tables With Formulas & Functions", "description": "جداول Excel المحورية مع الصيغ والدوال.", "image": "images/course37.jpg", "category": "إنتاجية ومكاتب", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/microsoft-excel-pivot-tables-with-formulas-functions/?couponCode=BISMILLAH19" },
            { "id": 38, "title": "CapCut & Google Veo 3: Cinematic AI Video Mastery", "description": "إتقان الفيديو السينمائي بالذكاء الاصطناعي مع CapCut وGoogle Veo 3.", "image": "images/course38.jpg", "category": "تصميم ومونتاج", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/master-ai-filmmaking-with-veo3/?im_ref=wTA2JMQE0xycUoDSYrxNU05MUkpT110Vv2q8Vs0&sharedid=&irpid=2550473&utm_medium=affiliate&utm_source=impact&utm_audience=mx&utm_tactic=&utm_content=3193860&utm_campaign=2550473&irgwc=1&afsrc=1&couponCode=DCD0DD65AC674C5A2D83" },
            { "id": 39, "title": "Microsoft Office Training : Master Excel, PowerPoint & Word", "description": "تدريب مايكروسوفت أوفيس: إتقان إكسل، باوربوينت ووورد.", "image": "images/course39.jpg", "category": "إنتاجية ومكاتب", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/microsoft-office-training-master-excel-powerpoint-word/?couponCode=BISMILLAH-22" },
            { "id": 40, "title": "Python Demonstrations For Practice Course", "description": "تطبيقات بايثون عملية للتدريب.", "image": "images/course40.jpg", "category": "برمجة وتطوير", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/python-for-beginners-demonstration-course/?sharedid=&irpid=2550473&utm_medium=affiliate&utm_source=impact&utm_audience=mx&utm_tactic=&utm_content=3193860&utm_campaign=2550473&irgwc=1&afsrc=1&im_ref=wTA2JMQE0xycUoDSYrxNU05MUkpT1121v2q8Vs0&couponCode=1C11EA262E5C5D7F7B19" },
            { "id": 41, "title": "Essential Photoshop Course for Beginner To Advanced", "description": "كورس فوتوشوب أساسي من المبتدئ للمتقدم.", "image": "images/course41.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/graphics-design-videoediting-course/?im_ref=wTA2JMQE0xycUoDSYrxNU05MUkpT11zBv2q8Vs0&sharedid=&irpid=2550473&utm_medium=affiliate&utm_source=impact&utm_audience=mx&utm_tactic=&utm_content=3193860&utm_campaign=2550473&irgwc=1&afsrc=1&couponCode=52C59BEAB3917A923178" },
            { "id": 42, "title": "Master Logo Design with Photoshop Illustrator Zero to Pro", "description": "إتقان تصميم الشعارات بالفوتوشوب وإليستريتور من الصفر للاحتراف.", "image": "images/course42.jpg", "category": "تصميم وجرافيك", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/master-logo-design-with-photoshop-illustrator-zero-to-pro/?im_ref=wTA2JMQE0xycUoDSYrxNU05MUkpT11zNv2q8Vs0&sharedid=&irpid=2550473&utm_medium=affiliate&utm_source=impact&utm_audience=mx&utm_tactic=&utm_content=3193860&utm_campaign=2550473&irgwc=1&afsrc=1&couponCode=024798D406787285E509" },
            { "id": 43, "title": "PowerShell Functions Master Class", "description": "ماستر كلاس في وظائف PowerShell.", "image": "images/course43.jpg", "category": "تكنولوجيا وشبكات", "date": "29 نوفمبر 2025", "url": "https://www.udemy.com/course/powershell-functions-master-class/?im_ref=wTA2JMQE0xycUoDSYrxNU05MUkpT1wRlv2q8Vs0&sharedid=&irpid=2550473&utm_medium=affiliate&utm_source=impact&utm_audience=mx&utm_tactic=&utm_content=3193860&utm_campaign=2550473&irgwc=1&afsrc=1&couponCode=FDDCAD88AAD460F08E4D" }
        ];

        // --- 2. بيانات المقالات ---
        const articlesData = [
          {
            "id": 1,
            "title": "فكك من جو \"أنت تنين مجنح\".. وركز في اللي ينفعك 🛑",
            "excerpt": "يا صاحبي، السوشيال ميديا هرتنا كلام عن إنك لازم تكون \"سوبر مان\" وإنك \"محور الكون\". الكلام ده بينفخك ع الفاضي، ولما تيجـي ع الأرض تتصدم.",
            "content": "يا صاحبي، السوشيال ميديا هرتنا كلام عن إنك لازم تكون \"سوبر مان\" وإنك \"محور الكون\". الكلام ده بينفخك ع الفاضي، ولما تيجـي ع الأرض تتصدم.\n\nالحقيقة إننا بشر عاديين، محتاجين نشتغل على \"نفسنا\" بجد من غير منظرة.\nمشكلتنا مش إننا مش واثقين في نفسنا، مشكلتنا إننا مش عارفين نفسنا أصلاً!\nعايز تطور نفسك بجد؟\n\nنظّف: شيل من دماغك فكرة إنك لازم تعجب كل الناس، وشيل من يومك الحاجات اللي بتضيع عمرك ع الفاضي.\nعبّي: املأ وقتك ودماغك بحاجة ليها قيمة، حاجة تنفعك وتنفع غيرك.\nأنت مش محتاج تكون \"أسطورة\"، أنت محتاج تكون \"إنسان حقيقي\" وسالك من جوا.",
            "date": "28 نوفمبر 2025",
            "image": "images/article1.jpg",
            "category": "تزكية وتطوير ذات",
            "author": "مصطفى كمشكاة",
            "url": "#"
          },
          {
            "id": 2,
            "title": "متجريش ورا \"التريند\".. شوف إيه اللي ناقص وسدّه 🧩",
            "excerpt": "كل شوية يطلع تريند \"اتعلم برمجة\"، \"اتعلم جرافيك\".. والناس تجري وخلاص. في قاعدة بلدي كده بتقول: \"الصنعة اللي تسد خانة، أحسن من مية شهادة في الدقانة\".",
            "content": "كل شوية يطلع تريند \"اتعلم برمجة\"، \"اتعلم جرافيك\".. والناس تجري وخلاص.\nفي قاعدة بلدي كده بتقول: \"الصنعة اللي تسد خانة، أحسن من مية شهادة في الدقانة\".\nبدل ما تشتت نفسك، اسأل نفسك سؤال واحد: الناس حواليا محتاجين إيه؟\n\nمحتاجين دكتور أمين؟ يبقى شطارتك في الطب هنا \"رسالة\".\nمحتاجين مهندس يبني صح؟ يبقى شغلك هنا \"أمانة\".\nمحتاجين مبرمج يعمل برامج تحمي خصوصيتهم؟ يبقى الكود بتاعك ده \"خدمة للناس\" (أهي كده في الأمان وزي الفل 😉).\nاتعلم عشان تنفع، مش عشان \"تلمع\" في الـ CV.",
            "date": "28 نوفمبر 2025",
            "image": "images/article2.jpg",
            "category": "تعلم ومهارات",
            "author": "مصطفى كمشكاة",
            "url": "#"
          },
          {
            "id": 3,
            "title": "الوقت مش فلوس.. الوقت هو \"أنت\" ⏳",
            "excerpt": "بيقولك الوقت من ذهب.. لأ يا سيدي، الوقت أغلى، الوقت هو عمرك اللي بيعدي ومش راجع. مشكلتنا مش في \"تنظيم الوقت\" بالجداول والألوان، مشكلتنا في \"البركة\".",
            "content": "بيقولك الوقت من ذهب.. لأ يا سيدي، الوقت أغلى، الوقت هو عمرك اللي بيعدي ومش راجع.\nمشكلتنا مش في \"تنظيم الوقت\" بالجداول والألوان، مشكلتنا في \"البركة\". اليوم بيطير عشان بنضيعه في \"اللا شيء\".\nعايز تمسك وقتك صح؟\n\nابدأ بالكبير: حق ربنا، وأهلك، وشغلك.. دول \"العواميد\" اللي شايلة يومك.\nاقفل الحنفية: التيك توك والفرجة على خناقات الناس دي حنفية بتسرب عمرك وأنت مش دريان.\nركز في اللي في إيدك دلوقتي، ومطمعش تعمل كل حاجة مرة واحدة عشان متخسرش كل حاجة.",
            "date": "28 نوفمبر 2025",
            "image": "images/article3.jpg",
            "category": "إنتاجية وإدارة وقت",
            "author": "مصطفى كمشكاة",
            "url": "#"
          },
          {
            "id": 4,
            "title": "شغّل الآلة عندك.. بس إياك تأجرلها دماغك! 🤖",
            "excerpt": "الذكاء الاصطناعي ده عامل زي \"الصنايعي الشاطر\" اللي معاك في الورشة. يساعدك، يناولك العدة، يلملك الدنيا.. ماشي. لكن المصيبة لو خليت \"الصنايعي\" هو اللي يمشيك!",
            "content": "الذكاء الاصطناعي ده عامل زي \"الصنايعي الشاطر\" اللي معاك في الورشة. يساعدك، يناولك العدة، يلملك الدنيا.. ماشي.\nلكن المصيبة لو خليت \"الصنايعي\" هو اللي يمشيك ويقولك الصح والغلط فين!\nالآلة يا بطل معندهاش \"روح\" ولا \"أخلاق\"، هي حافظة مش فاهمة.\n\nخد منها تلخيص، خد منها ترجمة، خليها توفر عليك وقت.\nبس اوعى تاخد منها رأي في دينك، أو قيمك، أو قرارات حياتك.\nأنت \"الأسطى\" وهي \"الأداة\". لو عكست الآية.. هتضيع.",
            "date": "28 نوفمبر 2025",
            "image": "images/article4.jpg",
            "category": "ذكاء اصطناعي",
            "author": "مصطفى كمشكاة",
            "url": "#"
          },
          {
            "id": 5,
            "title": "اعقلها وتوكل.. المعادلة اللي مفيش غيرها 🤲❤️",
            "excerpt": "ناس كتير واقعة في حفرة من اتنين: يا إما قاعد مأنتخ وبيقول \"يا رب ارزقني\" وهو مبيتحركش، يا إما فاكر إنه بذكاؤه وشطارتو هيعمل كل حاجة وينسى توفيق ربنا.",
            "content": "ناس كتير واقعة في حفرة من اتنين:\nيا إما قاعد مأنتخ وبيقول \"يا رب ارزقني\" وهو مبيتحركش (وده غلط).\nيا إما فاكر إنه بذكاؤه وشطارتو هيعمل كل حاجة وينسى توفيق ربنا (وده غرور).\nالصح فين؟ الصح في كلمتين: \"استعن بالله ولا تعجز\".\n\nاشتغل: افرم نفسك شغل وسعي، خبط على كل الأبواب، اتعلم وحاول مرة واتنين.. ده اسمه \"عدم العجز\".\nسلّمها لله: خليك متأكد من جواك إن الرزق والنتيجة دي بتاعة ربنا مش شطارة منك.. دي \"الاستعانة\".\nاعمل اللي عليك ع الأرض، وخلي قلبك متعلق بالسماء.. وكده أنت في التمام.",
            "date": "28 نوفمبر 2025",
            "image": "images/article5.jpg",
            "category": "تزكية وروحانيات",
            "author": "مصطفى كمشكاة",
            "url": "#"
          }
        ];

        // --- 3. لا يوجد كتب حالياً (فارغ) ---
        const booksData = [];


        // --- متغيرات الحالة ---
        let currentCourseCategory = 'الكل';
        let currentCourseSearch = '';
        
        let currentArticleCategory = 'الكل';
        let currentArticleSearch = '';

        let currentBookCategory = 'الكل';
        let currentBookSearch = '';

        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            showPage('home'); 
            initGallery();
            
            initCourses();
            initArticles(); 
            // initBooks(); // تم التعطيل مؤقتاً
            
            startCounterAnimation();
            
            checkUrlForArticle();
            checkUrlForImage();
        });

        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(sec => {
                sec.classList.add('hidden-section');
                sec.classList.remove('fade-in');
            });
            const activeSec = document.getElementById(pageId);
            if(activeSec) {
                activeSec.classList.remove('hidden-section');
                setTimeout(() => activeSec.classList.add('fade-in'), 10);
            }
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.dataset.page === pageId) {
                    btn.classList.add('bg-emerald-100', 'text-emerald-900');
                    btn.classList.remove('text-white', 'hover:bg-emerald-700');
                    if(btn.parentElement.classList.contains('bg-emerald-800/40')) {
                        btn.classList.add('bg-white/90', 'text-emerald-900');
                        btn.classList.remove('bg-emerald-100');
                    }
                } else {
                    btn.classList.remove('bg-emerald-100', 'text-emerald-900', 'bg-white/90');
                    btn.classList.add('text-white');
                }
            });
            if (pageId === 'article-view') {
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('bg-emerald-100', 'text-emerald-900', 'bg-white');
                    btn.classList.add('text-white');
                });
            }
            document.getElementById('mobile-menu').classList.add('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        async function downloadImage(url, filename) {
            try {
                const response = await fetch(url);
                const blob = await response.blob();
                const blobUrl = window.URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = blobUrl;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                window.URL.revokeObjectURL(blobUrl);
            } catch (error) {
                window.open(url, '_blank');
            }
        }

        // --- دالة مشاركة الصورة ---
        async function shareImage(url, id) {
            // إنشاء رابط مباشر للصورة باستخدام الهاش
            const fullUrl = `${window.location.origin}${window.location.pathname}#img-${id}`;
            
            if (navigator.share) {
                try {
                    // محاولة مشاركة الصورة كملف لو المتصفح يدعم
                    const response = await fetch(url);
                    const blob = await response.blob();
                    const file = new File([blob], "image.jpg", { type: "image/jpeg" });
                    
                    // نفضل مشاركة الرابط العميق في خانة URL
                    if (navigator.canShare && navigator.canShare({ files: [file] })) {
                        await navigator.share({
                            files: [file],
                            title: 'تصميم من كمشكاة',
                            text: 'شوف التصميم الجامد ده من موقع كمشكاة 😍',
                            url: fullUrl
                        });
                    } else {
                        // مشاركة الرابط كبديل
                        await navigator.share({
                            title: 'تصميم من كمشكاة',
                            text: 'شوف التصميم الجامد ده من موقع كمشكاة 😍',
                            url: fullUrl,
                        });
                    }
                } catch (error) {
                    console.log('Error sharing', error);
                    copyToClipboard(fullUrl);
                }
            } else {
                copyToClipboard(fullUrl);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('تم نسخ الرابط المباشر للصورة! شاركه براحتك 😉');
            }, (err) => {
                console.error('Async: Could not copy text: ', err);
            });
        }

        // --- دالة القلب (Love) ---
        function toggleHeart(btn, id) {
            let count = parseInt(localStorage.getItem(`heart_count_${id}`) || "0");
            const userLiked = localStorage.getItem(`user_liked_${id}`);

            if (!userLiked) {
                count++;
                localStorage.setItem(`heart_count_${id}`, count);
                localStorage.setItem(`user_liked_${id}`, "true");
                
                btn.innerHTML = `<i data-lucide="heart" class="w-5 h-5 heart-active"></i> <span class="text-xs font-bold ml-1">${count}</span>`;
                btn.classList.add('text-red-500');
            } else {
               alert("أنت عملت قلب للصورة دي قبل كده يا جميل ❤️");
            }
            lucide.createIcons();
        }
        
        // --- دالة القلب للمقال ---
        function toggleArticleHeart(btn, id) {
             // نفس منطق الصورة بس بمفتاح مختلف في الـ LocalStorage
            let count = parseInt(localStorage.getItem(`article_heart_count_${id}`) || "0");
            const userLiked = localStorage.getItem(`article_user_liked_${id}`);

            if (!userLiked) {
                count++;
                localStorage.setItem(`article_heart_count_${id}`, count);
                localStorage.setItem(`article_user_liked_${id}`, "true");
                
                btn.innerHTML = `<i data-lucide="heart" class="w-5 h-5 heart-active"></i> <span class="text-sm font-bold ml-1">${count}</span>`;
                btn.classList.add('text-red-500');
                btn.querySelector('i').classList.add('fill-red-500');
            } else {
               alert("أنت أبديت إعجابك بالمقال ده قبل كده ❤️");
            }
            lucide.createIcons();
        }

        // --- دالة مشاركة المقال ---
        async function shareArticle(id, title) {
            // إنشاء رابط مباشر للمقال باستخدام الهاش
            const articleUrl = `${window.location.origin}${window.location.pathname}#article-${id}`;
            
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: title,
                        text: `اقرأ المقال ده من كمشكاة: ${title}`,
                        url: articleUrl,
                    });
                } catch (error) {
                    copyToClipboard(articleUrl);
                }
            } else {
                copyToClipboard(articleUrl);
            }
        }
        
        // --- فحص الرابط عند الفتح لفتح المقال مباشرة ---
        function checkUrlForArticle() {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#article-')) {
                const articleId = parseInt(hash.replace('#article-', ''));
                if (!isNaN(articleId)) {
                    // تأخير بسيط للتأكد من تحميل البيانات
                    setTimeout(() => {
                        openArticle(articleId);
                    }, 100);
                }
            }
        }
        
        // --- فحص الرابط عند الفتح لفتح الصورة مباشرة (جديد) ---
        function checkUrlForImage() {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#img-')) {
                const imgId = parseInt(hash.replace('#img-', ''));
                if (!isNaN(imgId)) {
                    // تأكد أننا في صفحة المعرض
                    showPage('gallery');
                    // فتح اللايت بوكس للصورة المحددة
                    // نفترض اسم الصورة القياسي
                    const imgUrl = `images/stock${imgId}.jpg`;
                    setTimeout(() => {
                        openLightbox(imgUrl);
                    }, 500); // تأخير لضمان تحميل الصفحة
                }
            }
        }


        // --- دالة اللايت بوكس (تكبير الصورة) ---
        function openLightbox(imgUrl) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxDownload = document.getElementById('lightbox-download');
            
            lightboxImg.src = imgUrl;
            
            const fileName = imgUrl.split('/').pop() || 'download.jpg';
            lightboxDownload.setAttribute('onclick', `downloadImage('${imgUrl}', '${fileName}')`);
            lightboxDownload.href = "javascript:void(0)"; 
            
            lightbox.classList.add('active'); // استخدام كلاس active للترانزيشن
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            // إزالة الهاش عند إغلاق الصورة (اختياري للحفاظ على نظافة الرابط)
            if (window.location.hash.startsWith('#img-')) {
                history.pushState("", document.title, window.location.pathname + window.location.search);
            }
        }

        function openArticle(id) {
            const article = articlesData.find(a => a.id === id);
            if (!article) return;

            document.getElementById('article-view-title').innerText = article.title;
            document.getElementById('article-view-category').innerText = article.category || 'عام';
            
            // تحديث التاريخ في صفحة العرض
            const dateEl = document.getElementById('article-view-date');
            if (dateEl && article.date) {
                dateEl.innerText = article.date;
                dateEl.style.display = 'inline-block';
            } else if (dateEl) {
                dateEl.style.display = 'none';
            }
            
            const formattedContent = article.content ? article.content.replace(/\n/g, '<br>') : article.excerpt;
            document.getElementById('article-view-content').innerHTML = `<p>${formattedContent}</p>`;
            
            const imgEl = document.getElementById('article-view-image');
            imgEl.src = article.image;
            imgEl.onerror = function() { this.src = 'https://placehold.co/800x400/064e3b/ffffff?text=Article+Image'; };
            
            // تحديث أزرار التفاعل للمقال الحالي
            const shareBtn = document.getElementById('article-share-btn');
            const heartBtn = document.getElementById('article-heart-btn');
            
            // إعداد زر المشاركة
            shareBtn.onclick = () => shareArticle(article.id, article.title);
            
            // إعداد زر القلب (تحميل الحالة المحفوظة)
            const heartCount = localStorage.getItem(`article_heart_count_${article.id}`) || "0";
            const userLiked = localStorage.getItem(`article_user_liked_${article.id}`);
            
            heartBtn.innerHTML = `<i data-lucide="heart" class="w-5 h-5 ${userLiked ? 'heart-active fill-red-500' : ''}"></i> <span class="text-sm font-bold ml-1">${heartCount}</span>`;
            if (userLiked) heartBtn.classList.add('text-red-500');
            else heartBtn.classList.remove('text-red-500');
            
            heartBtn.onclick = () => toggleArticleHeart(heartBtn, article.id);
            
            // تحديث أيقونات لوسيد
            lucide.createIcons();

            showPage('article-view');
            
            history.pushState(null, null, `#article-${id}`);
        }
        
        window.onpopstate = function() {
             const hash = window.location.hash;
             if (hash.startsWith('#article-')) {
                 checkUrlForArticle();
             } else if (hash.startsWith('#img-')) {
                 checkUrlForImage();
             } else {
                 // العودة للصفحة الافتراضية أو القوائم حسب السياق
                 if(document.getElementById('article-view').classList.contains('hidden-section') === false) {
                     showPage('articles');
                 } else {
                    // الوضع الافتراضي
                 }
             }
        };

        // --- دالة مشاركة الكورس ---
        function shareCourse(url, title) {
            if (navigator.share) {
                navigator.share({
                    title: title,
                    text: `شوف الكورس الجامد ده: ${title}`,
                    url: url,
                })
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing', error));
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    alert('تم نسخ رابط الكورس! ابعته لأصحابك بقى 😉');
                }, (err) => {
                    console.error('Async: Could not copy text: ', err);
                });
            }
        }

        // --- منطق الكورسات (بحث + فلتر) ---
        function initCourses() {
            generateCourseCategoryButtons();
            renderCourses(coursesData);
        }

        function generateCourseCategoryButtons() {
            const categories = ['الكل', ...new Set(coursesData.map(c => c.category || 'أخرى'))];
            const filterContainer = document.getElementById('course-category-filters');
            filterContainer.innerHTML = '';
            
            categories.forEach(cat => {
                const btn = document.createElement('button');
                btn.className = `filter-btn ${cat==='الكل'?'active':''} px-6 py-2 rounded-full border border-white/50 bg-white/70 backdrop-blur text-slate-700 font-bold hover:bg-white transition-colors flex-shrink-0 shadow-sm`;
                btn.innerText = cat;
                btn.onclick = () => filterCoursesByCategory(cat);
                filterContainer.appendChild(btn);
            });
        }

        function filterCoursesByCategory(category) {
            currentCourseCategory = category;
            updateFilterButtons('course-category-filters', category);
            applyCourseFilters();
        }

        function filterCourses() {
            currentCourseSearch = document.getElementById('course-search-input').value.toLowerCase();
            applyCourseFilters();
        }

        function applyCourseFilters() {
            const filtered = coursesData.filter(course => {
                const matchesCategory = currentCourseCategory === 'الكل' || (course.category || 'أخرى') === currentCourseCategory;
                const matchesSearch = course.title.toLowerCase().includes(currentCourseSearch) || 
                                      course.description.toLowerCase().includes(currentCourseSearch);
                return matchesCategory && matchesSearch;
            });
            renderCourses(filtered);
        }

        function renderCourses(courses) {
            const container = document.getElementById('courses-grid');
            container.innerHTML = ''; 

            if (courses.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12 text-slate-400">
                        <i data-lucide="search-x" class="w-16 h-16 mx-auto mb-4 opacity-50"></i>
                        <p class="text-xl">مفيش كورسات بتطابق بحثك حالياً.</p>
                    </div>`;
                lucide.createIcons();
                return;
            }

            courses.forEach(course => {
                const categoryTag = course.category ? `<span class="absolute top-4 right-4 bg-emerald-600/90 text-white text-xs px-3 py-1 rounded-full shadow-sm z-10 backdrop-blur-sm">${course.category}</span>` : '';
                // إضافة التاريخ للكورس
                const dateTag = course.date ? `<div class="text-xs text-slate-500 mt-2 mb-1 flex items-center gap-1"><i data-lucide="calendar" class="w-3 h-3"></i> ${course.date}</div>` : '';
                
                const html = `
                    <div class="glass-panel rounded-2xl overflow-hidden transition-all duration-300 hover:-translate-y-1 flex flex-col h-full group relative">
                        ${categoryTag}
                        <div class="h-52 overflow-hidden bg-slate-200 relative">
                            <img src="${course.image}" alt="${course.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                                 onerror="this.src='https://placehold.co/600x400/064e3b/ffffff?text=Course'">
                        </div>
                        <div class="p-6 flex flex-col flex-1">
                            ${dateTag}
                            <h3 class="text-xl font-bold text-slate-800 mb-3 leading-snug">${course.title}</h3>
                            <p class="text-slate-500 text-sm mb-6 flex-1 leading-relaxed">${course.description}</p>
                            
                            <!-- الأزرار الجديدة: اشترك + مشاركة -->
                            <div class="flex gap-2 mt-auto">
                                <a href="${course.url}" target="_blank" class="flex-1 bg-emerald-600 text-white py-2.5 rounded-xl font-bold text-center hover:bg-emerald-700 transition shadow-md text-sm flex items-center justify-center gap-2">
                                    اشترك مجاناً <i data-lucide="external-link" class="w-4 h-4"></i>
                                </a>
                                <button onclick="shareCourse('${course.url}', '${course.title}')" class="bg-emerald-50 text-emerald-600 px-3 py-2.5 rounded-xl hover:bg-emerald-100 transition border border-emerald-100" title="مشاركة الكورس">
                                    <i data-lucide="share-2" class="w-5 h-5"></i>
                                </button>
                            </div>
                        </div>
                    </div>`;
                container.insertAdjacentHTML('beforeend', html);
            });
            lucide.createIcons();
        }

        // --- منطق المقالات (بحث + فلتر) ---
        function initArticles() {
            generateArticleCategoryButtons();
            renderArticles(articlesData);
        }

        function generateArticleCategoryButtons() {
            // استخراج الأقسام من بيانات المقالات
            const categories = ['الكل', ...new Set(articlesData.map(a => a.category || 'عام'))];
            const filterContainer = document.getElementById('article-category-filters');
            filterContainer.innerHTML = '';
            
            categories.forEach(cat => {
                const btn = document.createElement('button');
                btn.className = `filter-btn ${cat==='الكل'?'active':''} px-6 py-2 rounded-full border border-slate-200 bg-white text-slate-700 font-bold hover:bg-slate-50 transition-colors flex-shrink-0 shadow-sm`;
                btn.innerText = cat;
                btn.onclick = () => filterArticlesByCategory(cat);
                filterContainer.appendChild(btn);
            });
        }

        function filterArticlesByCategory(category) {
            currentArticleCategory = category;
            updateFilterButtons('article-category-filters', category);
            applyArticleFilters();
        }

        function filterArticles() {
            currentArticleSearch = document.getElementById('article-search-input').value.toLowerCase();
            applyArticleFilters();
        }

        function applyArticleFilters() {
            const filtered = articlesData.filter(article => {
                const matchesCategory = currentArticleCategory === 'الكل' || (article.category || 'عام') === currentArticleCategory;
                const matchesSearch = article.title.toLowerCase().includes(currentArticleSearch) || 
                                      article.excerpt.toLowerCase().includes(currentArticleSearch) ||
                                      (article.author && article.author.toLowerCase().includes(currentArticleSearch));
                return matchesCategory && matchesSearch;
            });
            renderArticles(filtered);
        }

        function renderArticles(articles) {
            const container = document.getElementById('articles-grid');
            container.innerHTML = '';
            
            if (articles.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12 text-slate-400">
                        <i data-lucide="search-x" class="w-16 h-16 mx-auto mb-4 opacity-50"></i>
                        <p class="text-xl">مفيش مقالات بتطابق بحثك حالياً.</p>
                    </div>`;
                lucide.createIcons();
                return;
            }

            articles.forEach(article => {
                // إضافة بادج القسم
                const categoryBadge = article.category ? `<span class="bg-emerald-100 text-emerald-800 text-xs px-2 py-1 rounded-md font-bold mb-2 inline-block">${article.category}</span>` : '';
                // إضافة التاريخ للكارت
                const dateTag = article.date ? `<span class="text-xs text-slate-400 block mb-2">${article.date}</span>` : '';

                // تغيير الكلاس هنا لـ solid-card بدلاً من glass-panel
                const html = `
                    <div class="solid-card p-6 rounded-3xl flex flex-col md:flex-row gap-6 items-center hover:translate-y-[-4px] transition-transform duration-300 group">
                        <div class="w-full md:w-56 h-40 bg-slate-200 rounded-2xl overflow-hidden flex-shrink-0 relative">
                            <img src="${article.image}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" 
                                 onerror="this.src='https://placehold.co/400x300/064e3b/ffffff?text=Article'">
                        </div>
                        <div class="flex-1 text-center md:text-right">
                            <div class="flex justify-between items-start mb-1">
                                ${categoryBadge}
                                ${dateTag}
                            </div>
                            <h3 class="text-2xl font-bold text-slate-800 mb-2 group-hover:text-emerald-700 transition-colors">${article.title}</h3>
                            <p class="text-slate-500 leading-relaxed mb-4 text-sm md:text-base line-clamp-2">${article.excerpt}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-slate-400 flex items-center gap-1"><i data-lucide="user" class="w-3 h-3"></i> ${article.author || 'مصطفى كمشكاة'}</span>
                                <button onclick="openArticle(${article.id})" class="inline-flex items-center text-emerald-600 font-bold hover:text-emerald-800 transition gap-2 text-sm">
                                    اقرأ المزيد <i data-lucide="arrow-left" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>`;
                container.insertAdjacentHTML('beforeend', html);
            });
            lucide.createIcons();
        }

        // Helper to update active button state
        function updateFilterButtons(containerId, activeCategory) {
            const container = document.getElementById(containerId);
            const isCourses = containerId === 'course-category-filters';
            
            container.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.innerText === activeCategory) {
                    btn.classList.add('active');
                    // إعادة ضبط الألوان بناءً على نوع القسم (كورسات: زجاجي، مقالات: أبيض)
                    if(isCourses) {
                        btn.classList.remove('bg-white/80', 'text-slate-700');
                    } else {
                        btn.classList.remove('bg-white', 'text-slate-700');
                    }
                    btn.classList.add('text-white');
                } else {
                    btn.classList.remove('active', 'text-white');
                     if(isCourses) {
                        btn.classList.add('bg-white/80', 'text-slate-700');
                    } else {
                        btn.classList.add('bg-white', 'text-slate-700');
                    }
                }
            });
        }

        // --- منطق الجاليري ---
        function initGallery() {
            loadMoreImages();
        }

        let currentImageCount = 0;
        const totalImages = 1000;
        const imagesPerLoad = 20;

        function loadMoreImages() {
            const container = document.getElementById('gallery-grid');
            const status = document.getElementById('gallery-status');
            const btn = document.getElementById('load-more-btn');
            
            const nextLimit = Math.min(currentImageCount + imagesPerLoad, totalImages);

            for (let i = currentImageCount + 1; i <= nextLimit; i++) {
                const imgUrl = `images/stock${i}.jpg`;
                const imgName = `kameshkah_design_${i}.jpg`;

                // استرجاع حالة اللايك من اللوكال ستورج
                const heartCount = localStorage.getItem(`heart_count_${i}`) || "";
                const userLiked = localStorage.getItem(`user_liked_${i}`) ? "text-red-500" : "text-white";
                const heartIconClass = localStorage.getItem(`user_liked_${i}`) ? "heart-active" : "";

                const imgHTML = `
                    <div class="glass-panel group relative overflow-hidden rounded-2xl mb-6 break-inside-avoid">
                        <div class="w-full relative cursor-pointer" onclick="openLightbox('${imgUrl}')">
                            <img src="${imgUrl}" 
                                 alt="تصميم رقم ${i}" 
                                 class="w-full h-auto object-cover rounded-2xl"
                                 loading="lazy"
                                 onerror="this.src='https://placehold.co/600x800/064e3b/ffffff?text=تصميم+${i}'">
                            
                            <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3 rounded-2xl">
                                <span class="text-white font-bold translate-y-4 group-hover:translate-y-0 transition-transform">تصميم رقم ${i}</span>
                                <div class="bg-white text-emerald-800 px-6 py-2 rounded-full font-bold flex items-center gap-2 hover:bg-emerald-500 hover:text-white transition-colors transform translate-y-4 group-hover:translate-y-0 transition-all delay-75 shadow-lg">
                                    <i data-lucide="zoom-in" class="w-4 h-4"></i> تكبير
                                </div>
                            </div>

                            <!-- أزرار المشاركة والقلب -->
                            <div class="absolute top-2 right-2 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
                                <button onclick="toggleHeart(this, ${i})" class="bg-black/50 backdrop-blur p-2 rounded-full hover:bg-white hover:text-red-500 transition ${userLiked} shadow-md" title="أحببته">
                                    <i data-lucide="heart" class="w-5 h-5 ${heartIconClass}"></i> <span class="text-xs font-bold ml-1">${heartCount}</span>
                                </button>
                                <button onclick="shareImage('${imgUrl}', ${i})" class="bg-black/50 backdrop-blur p-2 rounded-full text-white hover:bg-white hover:text-blue-500 transition shadow-md" title="مشاركة">
                                    <i data-lucide="share-2" class="w-5 h-5"></i>
                                </button>
                            </div>
                        </div>
                        <div class="md:hidden p-3 border-t border-slate-100 flex justify-between items-center bg-slate-50/50">
                            <div class="flex gap-3">
                                 <button onclick="toggleHeart(this, ${i})" class="${userLiked} flex items-center gap-1">
                                    <i data-lucide="heart" class="w-5 h-5 ${heartIconClass}"></i> <span class="text-xs font-bold">${heartCount}</span>
                                </button>
                                <button onclick="shareImage('${imgUrl}', ${i})" class="text-slate-600 hover:text-blue-500">
                                    <i data-lucide="share-2" class="w-5 h-5"></i>
                                </button>
                            </div>
                            <button onclick="downloadImage('${imgUrl}', '${imgName}')" class="text-emerald-600 bg-white p-2 rounded-lg border border-slate-200 shadow-sm">
                                <i data-lucide="download" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', imgHTML);
            }

            currentImageCount = nextLimit;
            status.innerText = `تم عرض ${currentImageCount} من ${totalImages} صورة`;

            if (currentImageCount >= totalImages) {
                btn.disabled = true;
                btn.innerHTML = '<span>تم تحميل كل الصور</span>';
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            }
            lucide.createIcons();
        }

        // --- أنيميشن الأرقام ---
        function startCounterAnimation() {
            const counters = document.querySelectorAll('.counter');
            const speed = 200; // كل ما الرقم قل، السرعة زادت

            counters.forEach(counter => {
                const animate = () => {
                    const value = +counter.getAttribute('data-target');
                    const data = +counter.innerText;
                    
                    const time = value / speed;
                    
                    if(data < value) {
                        counter.innerText = Math.ceil(data + time);
                        setTimeout(animate, 20);
                    } else {
                        counter.innerText = value;
                    }
                }
                
                // تشغيل الأنيميشن لما العنصر يظهر في الشاشة
                const observer = new IntersectionObserver((entries) => {
                    if(entries[0].isIntersecting) {
                        animate();
                        observer.disconnect(); // وقف المراقبة بعد التشغيل
                    }
                });
                
                observer.observe(counter);
            });
        }
    </script>
</body>
</html>