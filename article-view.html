<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-482MR7LT23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-482MR7LT23');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كمشكاة | قراءة</title>
    <link rel="icon" type="image/png" href="images/logo.png?v=2">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body data-page="articles">
    <div class="fixed-bg"><img src="images/bg.jpg"></div>
    <div id="header-ph"></div>

    <main class="pt-32 px-4 container mx-auto max-w-4xl min-h-screen fade-in">
        <a href="articles.html" class="text-emerald-800 mb-4 inline-flex items-center gap-2 bg-white/60 px-4 py-2 rounded-lg font-bold hover:bg-white transition shadow-sm">
            <i data-lucide="arrow-right"></i> رجوع للمقالات
        </a>
        <article class="glass-panel rounded-3xl overflow-hidden bg-white/80 border-white shadow-xl">
            <img id="v-img" src="" class="w-full h-64 md:h-96 object-cover">
            <div class="p-8 md:p-12">
                <h1 id="v-title" class="text-3xl md:text-5xl font-black mb-6 text-emerald-900 leading-tight"></h1>
                <div class="text-slate-700 leading-loose text-lg font-medium" id="v-content"></div>
            </div>
        </article>
    </main>

    <div id="footer-ph"></div>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
    <script src="js/script.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const id = new URLSearchParams(location.search).get('id');
            // استدعاء البيانات من المتغير العام في script.js
            setTimeout(() => {
                if(typeof articlesData !== 'undefined') {
                    const art = articlesData.find(a => a.id == id) || articlesData[0];
                    if(art){
                        document.getElementById('v-title').innerText = art.title;
                        document.getElementById('v-content').innerText = art.content;
                        document.getElementById('v-img').src = art.img;
                    }
                }
            }, 500); // تأخير بسيط لضمان تحميل script.js
        });
    </script>
</body>
</html>